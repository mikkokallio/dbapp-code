{% extends "layout.html" %}
{% block content %}

<h1 class="title">
  {{ event.title }}
</h1>
<h2 class="subtitle">
  Upcoming event
</h2>

<div class="box has-background-primary-light">
  <div class="columns">
    <div class="column">
      <i class="fas fa-calendar"></i> {{ event.date.strftime("%a %d %b") }}
    </div>
    <div class="column">
      <i class="fas fa-clock"></i> {{ event.time.strftime("%H:%M") }}
    </div>
    <div class="column">
      <i class="fas fa-map-marker"></i> To be added
    </div>
    <div class="column">
      Organized by {{ event.hostname }}
    </div>
  </div>

  <div><i class="fas fa-quote-left fa-2x fa-pull-left"></i> {{ event.description }}</div>
</div>
<div class="block">
  <h2 class="subtitle">
    Comments
  </h2>
</div>

<div>
  <div class="notification">
    <div class="columns is-mobile is-size-7">
      <div class="column is-one-fifth">
        {{ session.username }}
        <i class="fas fa-star"></i>
      </div>
      <div class="column">
        now
      </div>
    </div>
    <form action="/write_comment" method="POST">
      <div class="field">
        <div class="control">
          <input class="input is-small" type="text" name="comment" placeholder="Write a comment...">
        </div>
      </div>
      <input type="hidden" name="event_id" value="{{ id }}">
      <button id="button" type="submit" class="button is-small is-primary" onclick="showSpinner()">Post</button>
    </form>
  </div>

  {% for comment in comments %}
  <div class="notification">
    <div class="columns is-mobile is-size-7">
      <div class="column is-one-fifth">
        {{ comment.username }}
        {% if session.username == comment.username %}
        <i class="fas fa-star"></i>
        {% endif %}

      </div>
      <div class="column">
        {{ comment.created_at.strftime("%a %d %b %H:%M") }}
      </div>
    </div>
    <div>
      {{ comment.comment }}
    </div>
  </div>

  {% endfor %}

</div>
{% endblock %}